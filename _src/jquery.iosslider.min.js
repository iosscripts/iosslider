/*
 * iosSlider - http://iosscripts.com/iosslider/
 * 
 * A jQuery Horizontal Slider for iPhone/iPad Safari 
 * This plugin turns any wide element into a touch enabled horizontal slider.
 * 
 * Copyright (c) 2012 Marc Whitbread
 * 
 * Version: v1.1.59 (01/28/2013)
 * Minimum requirements: jQuery v1.4+
 *
 * Advanced requirements:
 * 1) jQuery bind() click event override on slide requires jQuery v1.6+
 *
 * Terms of use:
 *
 * 1) iosSlider is licensed under the Creative Commons â€“ Attribution-NonCommercial 3.0 License.
 * 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
 *	  Attribution is not required but always appreciated. For commercial projects, you
 *	  must purchase a license. You may download and play with the script before deciding to
 *	  fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
 *	  is the right script for your project is paramount.
 * 3) You are not permitted to make the resources found on iosscripts.com available for
 *    distribution elsewhere "as is" without prior consent. If you would like to feature
 *    iosSlider on your site, please do not link directly to the resource zip files. Please
 *    link to the appropriate page on iosscripts.com where users can find the download.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 */
 
(function(a){var ma=0,X=0,ba=0,U=0,J="ontouchstart"in window,Ba="onorientationchange"in window,ca=!1,Z=!1,$=!1,na=!1,ga="pointer",ta="pointer",oa=[],ha=[],R=[],ua=[],ia=[],H=[],aa=[],y=[],e=[],n=[],va=[],da=[],d={showScrollbar:function(f,d){f.scrollbarHide&&a("."+d).css({opacity:f.scrollbarOpacity,filter:"alpha(opacity:"+100*f.scrollbarOpacity+")"})},hideScrollbar:function(a,j,b,r,c,q,e,n,C,w){if(a.scrollbar&&a.scrollbarHide)for(var y=b;y<b+25;y++)j[j.length]=d.hideScrollbarIntervalTimer(10*y,r[b], (b+24-y)/24,c,q,e,n,C,w,a)},hideScrollbarInterval:function(f,j,b,r,c,q,e,y,C){U=-1*f/n[y]*(c-q-e-r);d.setSliderOffset("."+b,U);a("."+b).css({opacity:C.scrollbarOpacity*j,filter:"alpha(opacity:"+100*C.scrollbarOpacity*j+")"})},slowScrollHorizontalInterval:function(f,j,b,r,c,q,S,K,C,w,N,x,s,v,u,m,h,z,g){if(g.infiniteSlider){if(b<=-1*n[m]){var D=a(f).width();if(b<=-1*va[m]){var p=-1*N[0];a(j).each(function(b){d.setSliderOffset(a(j)[b],p+h);b<x.length&&(x[b]=-1*p);p+=u[b]});b+=-1*x[0];e[m]=-1*x[0]+h; n[m]=e[m]+D-q;y[m]=0}else{var l=0,O=d.getSliderOffset(a(j[0]),"x");a(j).each(function(b){d.getSliderOffset(this,"x")<O&&(O=d.getSliderOffset(this,"x"),l=b)});s=e[m]+D;d.setSliderOffset(a(j)[l],s);e[m]=-1*x[1]+h;n[m]=e[m]+D-q;x.splice(0,1);x.splice(x.length,0,-1*s+h);y[m]++}}if(b>=-1*e[m]||0<=b){D=a(f).width();if(0<=b){p=-1*N[0];a(j).each(function(b){d.setSliderOffset(a(j)[b],p+h);b<x.length&&(x[b]=-1*p);p+=u[b]});b-=-1*x[0];e[m]=-1*x[0]+h;n[m]=e[m]+D-q;for(y[m]=v;0<-1*x[0]-D+h;){var A=0,t=d.getSliderOffset(a(j[0]), "x");a(j).each(function(b){d.getSliderOffset(this,"x")>t&&(t=d.getSliderOffset(this,"x"),A=b)});s=e[m]-u[A];d.setSliderOffset(a(j)[A],s);x.splice(0,0,-1*s+h);x.splice(x.length-1,1);e[m]=-1*x[0]+h;n[m]=e[m]+D-q;y[m]--;H[m]++}}0>b&&(A=0,t=d.getSliderOffset(a(j[0]),"x"),a(j).each(function(b){d.getSliderOffset(this,"x")>t&&(t=d.getSliderOffset(this,"x"),A=b)}),s=e[m]-u[A],d.setSliderOffset(a(j)[A],s),x.splice(0,0,-1*s+h),x.splice(x.length-1,1),e[m]=-1*x[0]+h,n[m]=e[m]+D-q,y[m]--)}}N=!1;q=d.calcActiveOffset(g, b,x,q,y[m],v,w,m);s=(q+y[m]+v)%v;g.infiniteSlider?s!=aa[m]&&(N=!0):q!=H[m]&&(N=!0);if(N&&(v=new d.args(g,f,a(f).children(":eq("+s+")"),s,z,!0),a(f).parent().data("args",v),""!=g.onSlideChange))g.onSlideChange(v);H[m]=q;aa[m]=s;b=Math.floor(b);d.setSliderOffset(f,b);g.scrollbar&&(U=Math.floor((-1*b-e[m]+h)/(n[m]-e[m]+h)*(S-K-c)),f=c-C,b>=-1*e[m]+h?(f=c-C- -1*U,d.setSliderOffset(a("."+r),0)):(b<=-1*n[m]+1&&(f=S-K-C-U),d.setSliderOffset(a("."+r),U)),a("."+r).css({width:f+"px"}))},slowScrollHorizontal:function(f, j,b,r,c,q,S,K,C,w,N,x,s,v,u,m,h,z,g,D,p){q=[];var l=d.getSliderOffset(f,"x"),O=0,A=25/1024*K;frictionCoefficient=p.frictionCoefficient;elasticFrictionCoefficient=p.elasticFrictionCoefficient;snapFrictionCoefficient=p.snapFrictionCoefficient;5<c&&p.snapToChildren&&!g?O=1:-5>c&&(p.snapToChildren&&!g)&&(O=-1);c<-1*A?c=-1*A:c>A&&(c=A);a(f)[0]!==a(z)[0]&&(O*=-1,c*=-2);z=y[u];if(p.infiniteSlider)var t=e[u],k=n[u];g=[];for(var A=[],E=0;E<s.length;E++)g[E]=s[E],E<j.length&&(A[E]=d.getSliderOffset(a(j[E]), "x"));for(;1<c||-1>c;){c*=frictionCoefficient;l+=c;if((l>-1*e[u]||l<-1*n[u])&&!p.infiniteSlider)c*=elasticFrictionCoefficient,l+=c;if(p.infiniteSlider){if(l<=-1*k){for(var k=a(f).width(),J=0,L=A[0],E=0;E<A.length;E++)A[E]<L&&(L=A[E],J=E);E=t+k;A[J]=E;t=-1*g[1]+D;k=t+k-K;g.splice(0,1);g.splice(g.length,0,-1*E+D);z++}if(l>=-1*t){k=a(f).width();J=0;L=A[0];for(E=0;E<A.length;E++)A[E]>L&&(L=A[E],J=E);E=t-v[J];A[J]=E;g.splice(0,0,-1*E+D);g.splice(g.length-1,1);t=-1*g[0]+D;k=t+k-K;z--}}q[q.length]=l}A=!1; c=d.calcActiveOffset(p,l,g,K,z,h,H[u],u);t=(c+z+h)%h;p.snapToChildren&&(p.infiniteSlider?t!=aa[u]&&(A=!0):c!=H[u]&&(A=!0),0>O&&!A?(c++,c>=s.length&&!p.infinteSlider&&(c=s.length-1)):0<O&&!A&&(c--,0>c&&!p.infinteSlider&&(c=0)));if(p.snapToChildren||(l>-1*e[u]||l<-1*n[u])&&!p.infiniteSlider){l=d.getSliderOffset(f,"x");for(q.splice(0,q.length);l<g[c]-0.5||l>g[c]+0.5;)l=(l-g[c])*snapFrictionCoefficient+g[c],q[q.length]=l;q[q.length]=g[c]}O=1;0!=q.length%2&&(O=0);for(l=0;l<b.length;l++)clearTimeout(b[l]); z=(c+z+h)%h;t=0;for(l=O;l<q.length;l+=2)if(l==O||1<Math.abs(q[l]-t)||l>=q.length-2)t=q[l],b[b.length]=d.slowScrollHorizontalIntervalTimer(10*l,f,j,q[l],r,S,K,C,w,N,c,x,s,m,h,v,u,D,z,p);t=(c+y[u]+h)%h;""!=p.onSlideComplete&&(b[b.length]=d.onSlideCompleteTimer(10*(l+1),p,f,a(f).children(":eq("+t+")"),t,u));ia[u]=b;d.hideScrollbar(p,b,l,q,r,S,K,w,N,u)},onSlideComplete:function(f,j,b,r,c){var q=oa[c]!=r?!0:!1;b=new d.args(f,a(j),b,r,r,q);a(j).parent().data("args",b);if(""!=f.onSlideComplete)f.onSlideComplete(b); oa[c]=r},getSliderOffset:function(f,d){var b=0;d="x"==d?4:5;if(ca&&!Z&&!$){for(var b=["-webkit-transform","-moz-transform","transform"],r=0;r<b.length;r++)if(void 0!=a(f).css(b[r])&&0<a(f).css(b[r]).length){var c=a(f).css(b[r]).split(",");break}b=parseInt(c[d],10)}else b=parseInt(a(f).css("left"),10);return b},setSliderOffset:function(f,d){ca&&!Z&&!$?a(f).css({webkitTransform:"matrix(1,0,0,1,"+d+",0)",MozTransform:"matrix(1,0,0,1,"+d+",0)",transform:"matrix(1,0,0,1,"+d+",0)"}):a(f).css({left:d+"px"})}, setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(ga="-webkit-grab",ta="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(ga="move",ta="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?na=Z=!0:null!=navigator.userAgent.match("MSIE 8")?na=$=!0:null!=navigator.userAgent.match("MSIE 9")&&(na=!0)},has3DTransform:function(){var d=!1,j=a("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)",MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==j.attr("style")? d=!1:void 0!=j.attr("style")&&(d=!0);return d},getSlideNumber:function(a,d,b){return(a-y[d]+b)%b},calcActiveOffset:function(a,d,b,r){var c=!1;a=[];for(var q,e=0;e<b.length;e++)b[e]<=d&&b[e]>d-r&&(!c&&b[e]!=d&&(a[a.length]=b[e-1]),a[a.length]=b[e],c=!0);0==a.length&&(a[0]=b[b.length-1]);for(e=c=0;e<a.length;e++){var n=Math.abs(d-a[e]);n<r&&(c=a[e],r=n)}for(e=0;e<b.length;e++)c==b[e]&&(q=e);return q},changeSlide:function(f,j,b,e,c,q,n,K,C,w,N,x,s,v,u,m,h,z){d.autoSlidePause(v);for(var g=0;g<e.length;g++)clearTimeout(e[g]); var D=Math.ceil(z.autoSlideTransTimer/10)+1,p=d.getSliderOffset(j,"x"),l=x[f],J=l-p;if(z.infiniteSlider){f=(f-y[v]+2*m)%m;g=!1;0==f&&2==m&&(f=m,x[f]=x[f-1]-a(b).eq(0).outerWidth(!0),g=!0);l=x[f];J=l-p;l=[x[f]-a(j).width(),x[f]+a(j).width()];g&&x.splice(x.length-1,1);for(g=0;g<l.length;g++)Math.abs(l[g]-p)<Math.abs(J)&&(J=l[g]-p)}var l=[],A;d.showScrollbar(z,c);for(g=0;g<=D;g++)A=g,A/=D,A--,A=p+J*(Math.pow(A,5)+1),l[l.length]=A;for(g=p=0;g<l.length;g++){if(0==g||1<Math.abs(l[g]-p)||g>=l.length-2)p= l[g],e[g]=d.slowScrollHorizontalIntervalTimer(10*(g+1),j,b,l[g],c,q,n,K,C,w,f,N,x,u,m,s,v,h,f,z);0==g&&""!=z.onSlideStart&&(D=(H[v]+y[v]+m)%m,z.onSlideStart(new d.args(z,j,a(j).children(":eq("+D+")"),D,f,!1)))}p=!1;D=(f+y[v]+m)%m;z.infiniteSlider?D!=aa[v]&&(p=!0):f!=H[v]&&(p=!0);p&&""!=z.onSlideComplete&&(e[e.length]=d.onSlideCompleteTimer(10*(g+1),z,j,a(j).children(":eq("+D+")"),D,v));ia[v]=e;d.hideScrollbar(z,e,g,l,c,q,n,C,w,v);d.autoSlide(j,b,e,c,q,n,K,C,w,N,x,s,v,u,m,h,z)},autoSlide:function(a, j,b,e,c,q,n,J,C,w,N,x,s,v,u,m,h){if(!h.autoSlide)return!1;d.autoSlidePause(s);ha[s]=setTimeout(function(){!h.infiniteSlider&&H[s]>N.length-1&&(H[s]-=u);d.changeSlide((H[s]+y[s]+u+1)%u,a,j,b,e,c,q,n,J,C,w,N,x,s,v,u,m,h);d.autoSlide(a,j,b,e,c,q,n,J,C,w,N,x,s,v,u,m,h)},h.autoSlideTimer+h.autoSlideTransTimer)},autoSlidePause:function(a){clearTimeout(ha[a])},isUnselectable:function(d,j){return""!=j.unselectableSelector&&1==a(d).closest(j.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(a, j,b,e,c,q,n,y,C,w,H,x,s,v,u,m,h,z,g,D){return setTimeout(function(){d.slowScrollHorizontalInterval(j,b,e,c,q,n,y,C,w,H,x,s,v,u,m,h,z,g,D)},a)},onSlideCompleteTimer:function(a,e,b,r,c,q){return setTimeout(function(){d.onSlideComplete(e,b,r,c,q)},a)},hideScrollbarIntervalTimer:function(a,e,b,r,c,q,n,y,C,w){return setTimeout(function(){d.hideScrollbarInterval(e,b,r,c,q,n,y,C,w)},a)},args:function(f,e,b,n,c,q){this.settings=f;this.data=a(e).parent().data("iosslider");this.slideChanged=q;this.sliderObject= e;this.sliderContainerObject=a(e).parent();this.currentSlideObject=b;this.currentSlideNumber=n+1;this.targetSlideObject=a(e).children(":eq("+c+")");this.targetSlideNumber=c+1;this.currentSliderOffset=-1*d.getSliderOffset(e,"x");try{this.prevSlideNumber=void 0==a(e).parent().data("args")?f.startAtSlide:a(e).parent().data("args").prevSlideNumber==this.currentSlideNumber?a(e).parent().data("args").currentSlideNumber:a(e).parent().data("args").prevSlideNumber,this.prevSlideObject=a(e).children(":eq("+ this.prevSlideNumber+")")}catch(y){}},preventDrag:function(a){a.preventDefault()},preventClick:function(a){a.stopImmediatePropagation();return!1},enableClick:function(){return!0}};d.setBrowserInfo();var P={init:function(f,j){ca=d.has3DTransform();var b=a.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1,scrollbar:!1,scrollbarDrag:!1,scrollbarHide:!0,scrollbarLocation:"top",scrollbarContainer:"", scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:!1,keyboardControls:!1,tabToAdvance:!1,responsiveSlideContainer:!0,responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3,autoSlideTransTimer:750,infiniteSlider:!1,stageCSS:{position:"relative",top:"0", left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSliderResize:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},f);void 0==j&&(j=this);return a(j).each(function(){function f(){d.autoSlidePause(c);wa=a(F).find("a");za=a(F).find("[onclick]");pa=a(F).find("*");a(z).css("width","");a(z).css("height","");a(F).css("width","");B=a(F).children().not("script").get();ja=[];M=[];a(B).css("width","");n[c]=0;k=[];u=a(z).parent().width();g=a(z).outerWidth(!0); b.responsiveSlideContainer&&(g=a(z).outerWidth(!0)>u?u:a(z).outerWidth(!0));a(z).css({position:b.stageCSS.position,top:b.stageCSS.top,left:b.stageCSS.left,overflow:b.stageCSS.overflow,zIndex:b.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",width:g});a(b.unselectableSelector).css({cursor:"default"});for(var G=0;G<B.length;G++){ja[G]=a(B[G]).width();M[G]=a(B[G]).outerWidth(!0);var r=M[G];b.responsiveSlides&&(r=M[G]>g?g+-1*(M[G]-ja[G]):ja[G],a(B[G]).css({width:r}));a(B[G]).css({webkitBackfaceVisibility:"hidden", position:"absolute",top:0});k[G]=-1*n[c];n[c]=n[c]+r+(M[G]-ja[G])}b.snapSlideCenter&&(h=0.5*(g-M[0]),b.responsiveSlides&&M[0]>g&&(h=0));va[c]=2*n[c];for(G=0;G<B.length;G++)d.setSliderOffset(a(B[G]),-1*k[G]+n[c]+h),k[G]-=n[c];if(!b.infiniteSlider&&!b.snapSlideCenter){for(G=0;G<k.length&&!(k[G]<=-1*(2*n[c]-g));G++)ha=G;k.splice(ha+1,k.length);k[k.length]=-1*(2*n[c]-g)}for(G=0;G<k.length;G++)E[G]=k[G];A&&(b.startAtSlide=R[c].startAtSlide>k.length?k.length:R[c].startAtSlide,b.infiniteSlider?(b.startAtSlide= (R[c].startAtSlide-1+I)%I,H[c]=R[c].startAtSlide):(b.startAtSlide=0>R[c].startAtSlide-1?k.length-1:R[c].startAtSlide,H[c]=R[c].startAtSlide-1),aa[c]=H[c]);e[c]=n[c]+h;a(F).css({position:"relative",cursor:ga,webkitPerspective:"0",webkitBackfaceVisibility:"hidden",width:n[c]+"px"});V=n[c];n[c]=2*n[c]-g+2*h;(T=V<g?!0:!1)&&a(F).css({cursor:"default"});m=a(z).parent().outerHeight(!0);D=a(z).height();b.responsiveSlideContainer&&(D=D>m?m:D);a(z).css({height:D});d.setSliderOffset(F,k[H[c]]);if(b.infiniteSlider&& !T){G=d.getSliderOffset(a(F),"x");for(r=-1*((y[c]+I)%I);0>r;){var t=0,K=d.getSliderOffset(a(B[0]),"x");a(B).each(function(a){d.getSliderOffset(this,"x")<K&&(K=d.getSliderOffset(this,"x"),t=a)});var L=e[c]+V;d.setSliderOffset(a(B)[t],L);e[c]=-1*k[1]+h;n[c]=e[c]+V-g;k.splice(0,1);k.splice(k.length,0,-1*L+h);r++}for(;0<-1*k[0]-V+h&&b.snapSlideCenter&&A;){var O=0,S=d.getSliderOffset(a(B[0]),"x");a(B).each(function(a){d.getSliderOffset(this,"x")>S&&(S=d.getSliderOffset(this,"x"),O=a)});L=e[c]-M[O];d.setSliderOffset(a(B)[O], L);k.splice(0,0,-1*L+h);k.splice(k.length-1,1);e[c]=-1*k[0]+h;n[c]=e[c]+V-g;y[c]--;H[c]++}for(;G<=-1*n[c];)t=0,K=d.getSliderOffset(a(B[0]),"x"),a(B).each(function(a){d.getSliderOffset(this,"x")<K&&(K=d.getSliderOffset(this,"x"),t=a)}),L=e[c]+V,d.setSliderOffset(a(B)[t],L),e[c]=-1*k[1]+h,n[c]=e[c]+V-g,k.splice(0,1),k.splice(k.length,0,-1*L+h),y[c]++,H[c]--}d.setSliderOffset(F,k[H[c]]);!J&&!b.desktopClickDrag&&a(F).css({cursor:"default"});b.scrollbar&&(a("."+C).css({margin:b.scrollbarMargin,overflow:"hidden", display:"none"}),a("."+C+" ."+w).css({border:b.scrollbarBorder}),p=parseInt(a("."+C).css("marginLeft"))+parseInt(a("."+C).css("marginRight")),l=parseInt(a("."+C+" ."+w).css("borderLeftWidth"),10)+parseInt(a("."+C+" ."+w).css("borderRightWidth"),10),s=""!=b.scrollbarContainer?a(b.scrollbarContainer).width():g,v=(s-p)/I,b.scrollbarHide||(P=b.scrollbarOpacity),a("."+C).css({position:"absolute",left:0,width:s-p+"px",margin:b.scrollbarMargin}),"top"==b.scrollbarLocation?a("."+C).css("top","0"):a("."+C).css("bottom", "0"),a("."+C+" ."+w).css({borderRadius:b.scrollbarBorderRadius,background:b.scrollbarBackground,height:b.scrollbarHeight,width:v-l+"px",minWidth:b.scrollbarHeight,border:b.scrollbarBorder,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:P,filter:"alpha(opacity:"+100*P+")",boxShadow:b.scrollbarShadow}),d.setSliderOffset(a("."+C+" ."+w),Math.floor((-1*k[H[c]]-e[c]+h)/(n[c]-e[c]+h)*(s-p-v))),a("."+C).css({display:"block"}),N=a("."+C+" ."+w),x=a("."+C));b.scrollbarDrag&& !T&&a("."+C+" ."+w).css({cursor:ga});b.infiniteSlider&&(Q=(n[c]+g)/3);""!=b.navSlideSelector&&a(b.navSlideSelector).each(function(G){a(this).css({cursor:"pointer"});a(this).unbind(Y).bind(Y,function(){d.changeSlide(G,F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b)})});""!=b.navPrevSelector&&(a(b.navPrevSelector).css({cursor:"pointer"}),a(b.navPrevSelector).unbind(Y).bind(Y,function(){var a=(H[c]+y[c]+I)%I;(0<a||b.infiniteSlider)&&d.changeSlide(a-1,F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b)}));""!=b.navNextSelector&&(a(b.navNextSelector).css({cursor:"pointer"}), a(b.navNextSelector).unbind(Y).bind(Y,function(){var a=(H[c]+y[c]+I)%I;(a<k.length-1||b.infiniteSlider)&&d.changeSlide(a+1,F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b)}));b.autoSlide&&!T&&(""!=b.autoSlideToggleSelector&&(a(b.autoSlideToggleSelector).css({cursor:"pointer"}),a(b.autoSlideToggleSelector).unbind(Y).bind(Y,function(){ea?(d.autoSlide(F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b),ea=!1,a(b.autoSlideToggleSelector).removeClass("on")):(d.autoSlidePause(c),ea=!0,a(b.autoSlideToggleSelector).addClass("on"))})), !ea&&!T&&d.autoSlide(F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b),J?a(z).bind("touchend.iosSliderEvent",function(){!ea&&!T&&d.autoSlide(F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b)}):(a(z).bind("mouseenter.iosSliderEvent",function(){d.autoSlidePause(c)}),a(z).bind("mouseleave.iosSliderEvent",function(){!ea&&!T&&d.autoSlide(F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b)})));a(z).data("iosslider",{obj:Aa,settings:b,scrollerNode:F,slideNodes:B,numberOfSlides:I,centeredSlideOffset:h,sliderNumber:c,originalOffsets:E,childrenOffsets:k, sliderMax:n[c],scrollbarClass:w,scrollbarWidth:v,scrollbarStageWidth:s,stageWidth:g,scrollMargin:p,scrollBorder:l,infiniteSliderOffset:y[c],infiniteSliderWidth:Q,slideNodeOuterWidths:M});A=!1;return!0}ma++;var c=ma,j=[];R[c]=b;e[c]=0;n[c]=0;var S=[0,0],K=[0,0],C="scrollbarBlock"+ma,w="scrollbar"+ma,N,x,s,v,u,m,h=0,z=a(this),g,D,p,l,O,A=!0,t=-1,k,E=[],P=0,L=0,ca=0,F=a(this).children(":first-child"),B,ja,M,I=a(F).children().not("script").size(),W=!1,ha=0,xa=!1,qa=void 0,Q;y[c]=0;var T=!1;oa[c]=-1;var ea= !1;ua[c]=!1;var ra,sa=!1,ka=!1,V,Y=J?"touchstart.iosSliderEvent":"click.iosSliderEvent",wa,za,pa;da[c]=!1;ia[c]=[];b.scrollbarDrag&&(b.scrollbar=!0,b.scrollbarHide=!1);var Aa=a(this);if(void 0!=Aa.data("iosslider"))return!0;a(this).find("img").bind("dragstart.iosSliderEvent",function(a){a.preventDefault()});b.infiniteSlider&&(b.scrollbar=!1);b.scrollbar&&(""!=b.scrollbarContainer?a(b.scrollbarContainer).append("<div class = '"+C+"'><div class = '"+w+"'></div></div>"):a(F).parent().append("<div class = '"+ C+"'><div class = '"+w+"'></div></div>"));if(!f())return!0;a(this).find("a").bind("mousedown",d.preventDrag);a(this).find("[onclick]").bind("click",d.preventDrag).each(function(){a(this).data("onclick",this.onclick)});var t=d.calcActiveOffset(b,d.getSliderOffset(a(F),"x"),k,g,y[c],I,void 0,c),t=(t+y[c]+I)%I,fa=new d.args(b,F,a(F).children(":eq("+t+")"),t,t,!1);a(z).data("args",fa);if(""!=b.onSliderLoaded)b.onSliderLoaded(fa);oa[c]=t;if(R[c].responsiveSlides||R[c].responsiveSlideContainer)t=Ba?"orientationchange": "resize",a(window).bind(t+".iosSliderEvent",function(){if(!f())return!0;var c=a(z).data("args");if(""!=b.onSliderResize)b.onSliderResize(c)});(b.keyboardControls||b.tabToAdvance)&&!T&&a(document).bind("keydown.iosSliderEvent",function(a){!Z&&!$&&(a=a.originalEvent);if(37==a.keyCode&&b.keyboardControls)a.preventDefault(),a=(H[c]+y[c]+I)%I,(0<a||b.infiniteSlider)&&d.changeSlide(a-1,F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b);else if(39==a.keyCode&&b.keyboardControls||9==a.keyCode&&b.tabToAdvance)a.preventDefault(), a=(H[c]+y[c]+I)%I,(a<k.length-1||b.infiniteSlider)&&d.changeSlide(a+1,F,B,j,w,v,g,s,p,l,E,k,M,c,Q,I,h,b)});if(J||b.desktopClickDrag){var fa=J?"touchstart.iosSliderEvent":"mousedown.iosSliderEvent",la=a(F),t=a(F),ya=!1;b.scrollbarDrag&&(la=la.add(N),t=t.add(x));a(la).bind(fa,function(f){if(da[c]||T||(ya=d.isUnselectable(f.target,b)))return!0;ra=a(this)[0]===a(N)[0]?N:F;!Z&&!$&&(f=f.originalEvent);d.autoSlidePause(c);pa.unbind(".disableClick");J?(eventX=f.touches[0].pageX,eventY=f.touches[0].pageY): (window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),eventX=f.pageX,eventY=f.pageY,xa=!0,qa=F,a(this).css({cursor:ta}));S=[0,0];K=[0,0];X=0;W=!1;for(f=0;f<j.length;f++)clearTimeout(j[f]);f=d.getSliderOffset(F,"x");f>-1*e[c]+h+V?(f=-1*e[c]+h+V,d.setSliderOffset(a("."+w),f),a("."+w).css({width:v-l+"px"})):f<-1*n[c]&&(d.setSliderOffset(a("."+w),s-p-v), a("."+w).css({width:v-l+"px"}));f=a(this)[0]===a(N)[0]?e[c]:0;L=-1*(d.getSliderOffset(this,"x")-eventX-f);d.getSliderOffset(this,"y");S[1]=eventX;K[1]=eventY;ka=!1});fa=J?"touchmove.iosSliderEvent":"mousemove.iosSliderEvent";a(t).bind(fa,function(f){!Z&&!$&&(f=f.originalEvent);if(da[c]||T||ya)return!0;var j=0;J||(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()); if(J)eventX=f.touches[0].pageX,eventY=f.touches[0].pageY;else if(eventX=f.pageX,eventY=f.pageY,!xa||!na&&("undefined"!=typeof f.webkitMovementX||"undefined"!=typeof f.webkitMovementY)&&0===f.webkitMovementY&&0===f.webkitMovementX)return!1;S[0]=S[1];S[1]=eventX;X=(S[1]-S[0])/2;K[0]=K[1];K[1]=eventY;ba=(K[1]-K[0])/2;if(!W){var r=(H[c]+y[c]+I)%I,r=new d.args(b,F,a(F).children(":eq("+r+")"),r,r,!1);a(z).data("args",r);if(""!=b.onSlideStart)b.onSlideStart(r)}if((3<ba||-3>ba)&&3>X&&-3<X&&J&&!W)sa=!0;(5< X||-5>X)&&J?(f.preventDefault(),W=!0):J||(W=!0);if(W&&!sa){var r=d.getSliderOffset(F,"x"),m=a(this)[0]===a(x)[0]?e[c]:h,q=a(this)[0]===a(x)[0]?(e[c]-n[c]-h)/(s-p-v):1,t=a(this)[0]===a(x)[0]?b.scrollbarElasticPullResistance:b.elasticPullResistance,A=b.snapSlideCenter&&a(this)[0]===a(x)[0]?0:h,C=b.snapSlideCenter&&a(this)[0]===a(x)[0]?h:0;J&&(ca!=f.touches.length&&(L=-1*r+eventX),ca=f.touches.length);if(b.infiniteSlider){if(r<=-1*n[c]){var u=a(F).width();if(r<=-1*va[c]){var D=-1*E[0];a(B).each(function(b){d.setSliderOffset(a(B)[b], D+h);b<k.length&&(k[b]=-1*D);D+=M[b]});L-=-1*k[0];e[c]=-1*k[0]+h;n[c]=e[c]+u-g;y[c]=0}else{var N=0,Q=d.getSliderOffset(a(B[0]),"x");a(B).each(function(a){d.getSliderOffset(this,"x")<Q&&(Q=d.getSliderOffset(this,"x"),N=a)});t=e[c]+u;d.setSliderOffset(a(B)[N],t);e[c]=-1*k[1]+h;n[c]=e[c]+u-g;k.splice(0,1);k.splice(k.length,0,-1*t+h);y[c]++}}if(r>=-1*e[c]||0<=r)if(u=a(F).width(),0<=r){D=-1*E[0];a(B).each(function(b){d.setSliderOffset(a(B)[b],D+h);b<k.length&&(k[b]=-1*D);D+=M[b]});L+=-1*k[0];e[c]=-1*k[0]+ h;n[c]=e[c]+u-g;for(y[c]=I;0<-1*k[0]-u+h;){var P=0,R=d.getSliderOffset(a(B[0]),"x");a(B).each(function(a){d.getSliderOffset(this,"x")>R&&(R=d.getSliderOffset(this,"x"),P=a)});t=e[c]-M[P];d.setSliderOffset(a(B)[P],t);k.splice(0,0,-1*t+h);k.splice(k.length-1,1);e[c]=-1*k[0]+h;n[c]=e[c]+u-g;y[c]--;H[c]++}}else P=0,R=d.getSliderOffset(a(B[0]),"x"),a(B).each(function(a){d.getSliderOffset(this,"x")>R&&(R=d.getSliderOffset(this,"x"),P=a)}),t=e[c]-M[P],d.setSliderOffset(a(B)[P],t),k.splice(0,0,-1*t+h),k.splice(k.length- 1,1),e[c]=-1*k[0]+h,n[c]=e[c]+u-g,y[c]--}else u=a(F).width(),r>-1*e[c]+h&&(j=-1*(e[c]+-1*(L-m-eventX+A)*q-m)*t/q),r<-1*n[c]&&(j=-1*(n[c]+C+-1*(L-m-eventX)*q-m)*t/q);d.setSliderOffset(F,-1*(L-m-eventX-j)*q-m+C);b.scrollbar&&(d.showScrollbar(b,w),U=Math.floor((L-eventX-j-e[c]+A)/(n[c]-e[c]+h)*(s-p-v)*q),m=v,r>=-1*e[c]+A+u?(m=v-l- -1*U,d.setSliderOffset(a("."+w),0),a("."+w).css({width:m+"px"})):r<=-1*n[c]+1?(m=s-p-l-U,d.setSliderOffset(a("."+w),U),a("."+w).css({width:m+"px"})):d.setSliderOffset(a("."+ w),U));J&&(O=f.touches[0].pageX);f=!1;j=d.calcActiveOffset(b,-1*(L-eventX-j),k,g,y[c],I,void 0,c);u=(j+y[c]+I)%I;b.infiniteSlider?u!=aa[c]&&(f=!0):j!=H[c]&&(f=!0);if(f&&(H[c]=j,aa[c]=u,ka=!0,r=new d.args(b,F,a(F).children(":eq("+u+")"),u,u,!0),a(z).data("args",r),""!=b.onSlideChange))b.onSlideChange(r)}});a(la).bind("touchend.iosSliderEvent",function(a){a=a.originalEvent;if(da[c]||T||ya)return!0;if(0!=a.touches.length)for(var f=0;f<a.touches.length;f++)a.touches[f].pageX==O&&d.slowScrollHorizontal(F, B,j,w,X,ba,v,g,s,p,l,E,k,M,c,Q,I,ra,ka,h,b);else d.slowScrollHorizontal(F,B,j,w,X,ba,v,g,s,p,l,E,k,M,c,Q,I,ra,ka,h,b);sa=!1});if(!J){t=a(window);if($||Z)t=a(document);a(t).bind("mouseup.iosSliderEvent"+c,function(){W?wa.unbind("click.disableClick").bind("click.disableClick",d.preventClick):wa.unbind("click.disableClick").bind("click.disableClick",d.enableClick);za.each(function(){this.onclick=function(b){if(W)return!1;a(this).data("onclick").call(this,b||window.event)}});1.8<=parseFloat(a().jquery)? pa.each(function(){var b=a._data(this,"events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!W)return!1;a(this).one("click.disableClick",d.preventClick);var b=a._data(this,"events").click,c=b.pop();b.splice(0,0,c)}}):1.6<=parseFloat(a().jquery)&&pa.each(function(){var b=a(this).data("events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!W)return!1;a(this).one("click.disableClick",d.preventClick);var b=a(this).data("events").click,c=b.pop(); b.splice(0,0,c)}});if(!ua[c]){if(T)return!0;a(la).css({cursor:ga});xa=!1;if(void 0==qa)return!1;d.slowScrollHorizontal(qa,B,j,w,X,ba,v,g,s,p,l,E,k,M,c,Q,I,ra,ka,h,b);qa=void 0}sa=!1})}}})},destroy:function(f,e){void 0==e&&(e=this);return a(e).each(function(){var b=a(this),e=b.data("iosslider");if(void 0==e)return!1;void 0==f&&(f=!0);d.autoSlidePause(e.sliderNumber);ua[e.sliderNumber]=!0;a(window).unbind(".iosSliderEvent-"+e.sliderNumber);a(window).unbind(".iosSliderEvent");a(document).unbind(".iosSliderEvent-"+ e.sliderNumber);a(document).unbind("keydown.iosSliderEvent");a(this).unbind(".iosSliderEvent");a(this).children(":first-child").unbind(".iosSliderEvent");a(this).children(":first-child").children().unbind(".iosSliderEvent");f&&(a(this).attr("style",""),a(this).children(":first-child").attr("style",""),a(this).children(":first-child").children().attr("style",""),a(e.settings.navSlideSelector).attr("style",""),a(e.settings.navPrevSelector).attr("style",""),a(e.settings.navNextSelector).attr("style", ""),a(e.settings.autoSlideToggleSelector).attr("style",""),a(e.settings.unselectableSelector).attr("style",""));e.settings.scrollbar&&a(".scrollbarBlock"+e.sliderNumber).remove();for(var e=ia[e.sliderNumber],c=0;c<e.length;c++)clearTimeout(e[c]);b.removeData("iosslider");b.removeData("args")})},update:function(f){void 0==f&&(f=this);return a(f).each(function(){var f=a(this),b=f.data("iosslider");if(void 0==b)return!1;b.settings.startAtSlide=f.data("args").currentSlideNumber;P.destroy(!1,this);1!= b.numberOfSlides&&b.settings.infiniteSlider&&(b.settings.startAtSlide=(H[b.sliderNumber]+1+y[b.sliderNumber]+b.numberOfSlides)%b.numberOfSlides);P.init(b.settings,this);f=new d.args(b.settings,b.scrollerNode,a(b.scrollerNode).children(":eq("+(b.settings.startAtSlide-1)+")"),b.settings.startAtSlide-1,b.settings.startAtSlide-1,!1);a(b.stageNode).data("args",f);if(""!=b.settings.onSliderUpdate)b.settings.onSliderUpdate(f)})},addSlide:function(f,d){return this.each(function(){var b=a(this),e=b.data("iosslider"); if(void 0==e)return!1;e.settings.infiniteSlider?(1==d?a(e.scrollerNode).children(":eq(0)").before(f):a(e.scrollerNode).children(":eq("+(d-2)+")").after(f),-1>y[e.sliderNumber]&&H[e.sliderNumber]--,b.data("args").currentSlideNumber>=d&&H[e.sliderNumber]++):(d<=e.numberOfSlides?a(e.scrollerNode).children(":eq("+(d-1)+")").before(f):a(e.scrollerNode).children(":eq("+(d-2)+")").after(f),b.data("args").currentSlideNumber>=d&&b.data("args").currentSlideNumber++);b.data("iosslider").numberOfSlides++;P.update(this)})}, removeSlide:function(d){return this.each(function(){var e=a(this).data("iosslider");if(void 0==e)return!1;a(e.scrollerNode).children(":eq("+(d-1)+")").remove();H[e.sliderNumber]>d-1&&H[e.sliderNumber]--;P.update(this)})},goToSlide:function(e,j){void 0==j&&(j=this);return a(j).each(function(){var b=a(this).data("iosslider");if(void 0==b)return!1;e=e>b.childrenOffsets.length?b.childrenOffsets.length-1:e-1;d.changeSlide(e,a(b.scrollerNode),a(b.slideNodes),ia[b.sliderNumber],b.scrollbarClass,b.scrollbarWidth, b.stageWidth,b.scrollbarStageWidth,b.scrollMargin,b.scrollBorder,b.originalOffsets,b.childrenOffsets,b.slideNodeOuterWidths,b.sliderNumber,b.infiniteSliderWidth,b.numberOfSlides,b.centeredSlideOffset,b.settings);H[b.sliderNumber]=e})},lock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;da[d.sliderNumber]=!0})},unlock:function(){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;da[d.sliderNumber]=!1})},getData:function(){return this.each(function(){var d= a(this).data("iosslider");return void 0==d?!1:d})}};a.fn.iosSlider=function(d){if(P[d])return P[d].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof d||!d)return P.init.apply(this,arguments);a.error("invalid method call!")}})(jQuery);