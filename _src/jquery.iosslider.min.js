/*
 * iosSlider - http://iosscripts.com/iosslider/
 * 
 * A jQuery Horizontal Slider for iPhone/iPad Safari 
 * This plugin turns any wide element into a touch enabled horizontal slider.
 * 
 * Copyright (c) 2012 Marc Whitbread
 * 
 * Version: v1.1.0 (09/26/2012)
 * Minimum requirements: jQuery v1.4+
 * 
 * Advanced requirements:
 * 1) jQuery bind() click event override on slide requires jQuery v1.6+
 *
 * Terms of use:
 *
 * 1) iosSlider is licensed under the Creative Commons â€“ Attribution-NonCommercial 3.0 License.
 * 2) You may use iosSlider free for personal or non-profit purposes, without restriction. 
 *	  Attribution is not required but always appreciated. For commercial projects, you 
 *	  must purchase a license. You may download and play with the script before deciding to 
 *	  fully implement it in your project. Making sure you are satisfied, and knowing iosSlider 
 *	  is the right script for your project is paramount.
 * 3) You are not permitted to make the resources found on iosscripts.com available for 
 *    distribution elsewhere "as is" without prior consent. If you would like to feature 
 *    iosSlider on your site, please do not link directly to the resource zip files. Please 
 *    link to the appropriate page on iosscripts.com where users can find the download.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 */
 
(function(a){var ca=0,O=0,S=0,I=0,z="ontouchstart"in window,qa="onorientationchange"in window,T=!1,W=!1,X=!1,Y="pointer",ia="pointer",da=[],Z=[],ja=[],ka=[],$=[],s=[],U=[],G=[],f=[],l=[],la=[],ea=[],e={showScrollbar:function(g,e){g.scrollbarHide&&a("."+e).css({opacity:g.scrollbarOpacity,filter:"alpha(opacity:"+100*g.scrollbarOpacity+")"})},hideScrollbar:function(a,d,c,C,b,q,L,f,l,t){if(a.scrollbar&&a.scrollbarHide)for(var s=c;s<c+25;s++)d[d.length]=e.hideScrollbarIntervalTimer(10*s,C[c],(c+24-s)/ 24,b,q,L,f,l,t,a)},hideScrollbarInterval:function(g,d,c,C,b,q,f,s,u){I=-1*g/l[s]*(b-q-f-C);e.setSliderOffset("."+c,I);a("."+c).css({opacity:u.scrollbarOpacity*d,filter:"alpha(opacity:"+100*u.scrollbarOpacity*d+")"})},slowScrollHorizontalInterval:function(g,d,c,C,b,q,L,K,u,t,E,w,r,p,h,A){if(A.infiniteSlider){if(c<=-1*l[h]){var j=a(g).width();if(c<=-1*la[h]){var m=-1*E[0];a(d).each(function(b){e.setSliderOffset(a(d)[b],m);b<w.length&&(w[b]=-1*m);m+=a(this).width()});c+=-1*w[0];f[h]=-1*w[0];l[h]=f[h]+ j-q;G[h]=0}else{var y=0,n=e.getSliderOffset(a(d[0]),"x");a(d).each(function(a){e.getSliderOffset(this,"x")<n&&(n=e.getSliderOffset(this,"x"),y=a)});r=f[h]+j;e.setSliderOffset(a(d)[y],r);f[h]=-1*w[1];l[h]=f[h]+j-q;w.splice(0,1);w.splice(w.length,0,-1*r);G[h]++}}if(c>=-1*f[h])if(j=a(g).width(),0<=c)m=-1*E[0],a(d).each(function(b){e.setSliderOffset(a(d)[b],m);b<w.length&&(w[b]=-1*m);m+=a(this).width()}),c-=-1*w[0],f[h]=-1*w[0],l[h]=f[h]+j-q,G[h]=p;else{var i=0,v=e.getSliderOffset(a(d[0]),"x");a(d).each(function(a){e.getSliderOffset(this, "x")>v&&(v=e.getSliderOffset(this,"x"),i=a)});r=f[h]-a(d[i]).width();e.setSliderOffset(a(d)[i],r);w.splice(0,0,-1*r);w.splice(w.length-1,1);f[h]=-1*w[0];l[h]=f[h]+j-q;G[h]--}}E=!1;q=e.calcActiveOffset(A,c,w,q,G[h],p,t,h);r=(q+G[h]+p)%p;A.infiniteSlider?r!=U[h]&&(E=!0):q!=s[h]&&(E=!0);if(E&&""!=A.onSlideChange)A.onSlideChange(new e.args(A,g,a(g).children(":eq("+r+")"),r));s[h]=q;U[h]=r;c=Math.floor(c);e.setSliderOffset(g,c);A.scrollbar&&(I=Math.floor((-1*c-f[h])/(l[h]-f[h])*(L-K-b)),g=b-u,c>=-1*f[h]? (g=b-u- -1*I,e.setSliderOffset(a("."+C),0)):(c<=-1*l[h]+1&&(g=L-K-u-I),e.setSliderOffset(a("."+C),I)),a("."+C).css({width:g+"px"}))},slowScrollHorizontal:function(g,d,c,C,b,q,L,K,u,t,E,w,r,p,h,A,j,m,y){var q=[],n=e.getSliderOffset(g,"x"),i=0,v=25/1024*K;frictionCoefficient=y.frictionCoefficient;elasticFrictionCoefficient=y.elasticFrictionCoefficient;snapFrictionCoefficient=y.snapFrictionCoefficient;5<b&&y.snapToChildren&&!m?i=1:-5>b&&(y.snapToChildren&&!m)&&(i=-1);b<-1*v?b=-1*v:b>v&&(b=v);a(g)[0]!== a(j)[0]&&(i*=-1,b*=-2);if(y.infiniteSlider)var k=f[p],F=l[p],z=G[p];j=[];m=[];for(v=0;v<r.length;v++)j[v]=r[v],m[v]=e.getSliderOffset(a(d[v]),"x");for(;1<b||-1>b;){b*=frictionCoefficient;n+=b;if((n>-1*f[p]||n<-1*l[p])&&!y.infiniteSlider)b*=elasticFrictionCoefficient,n+=b;if(y.infiniteSlider){if(n<=-1*F){for(var F=a(g).width(),H=0,I=m[0],v=0;v<m.length;v++)m[v]<I&&(I=m[v],H=v);v=k+F;m[H]=v;k=-1*j[1];F=k+F-K;j.splice(0,1);j.splice(j.length,0,-1*v);z--}if(n>=-1*k){F=a(g).width();H=0;I=m[0];for(v=0;v< m.length;v++)m[v]>I&&(I=m[v],H=v);v=k-a(d[H]).width();m[H]=v;j.splice(0,0,-1*v);j.splice(j.length-1,1);k=-1*j[0];F=k+F-K;z++}}q[q.length]=n}k=!1;b=e.calcActiveOffset(y,n,j,K,z,A,s[p],p);z=(b+z+A)%A;y.snapToChildren&&(y.infiniteSlider?z!=U[p]&&(k=!0):b!=s[p]&&(k=!0),0>i&&!k?(b++,b>=r.length&&!y.infinteSlider&&(b=r.length-1)):0<i&&!k&&(b--,0>b&&!y.infinteSlider&&(b=0)));if(y.snapToChildren||(n>-1*f[p]||n<-1*l[p])&&!y.infiniteSlider){n=e.getSliderOffset(g,"x");for(q.splice(0,q.length);n<j[b]-0.5||n> j[b]+0.5;)n=(n-j[b])*snapFrictionCoefficient+j[b],q[q.length]=n;q[q.length]=j[b]}n=1;0!=q.length%2&&(n=0);for(i=0;i<c.length;i++)clearTimeout(c[i]);z=0;for(i=n;i<q.length;i+=2)if(i==n||1<Math.abs(q[i]-z)||i>=q.length-2)z=q[i],c[c.length]=e.slowScrollHorizontalIntervalTimer(10*i,g,d,q[i],C,L,K,u,t,E,b,w,r,h,A,p,y);c[c.length]=e.onSlideCompleteTimer(10*(i+1),y,g,a(g).children(":eq("+b+")"),b,p);$[p]=c;e.hideScrollbar(y,c,i,q,C,L,K,t,E,p)},onSlideComplete:function(g,d,c,C,b){if(da[b]!=C&&""!=g.onSlideComplete)g.onSlideComplete(new e.args(g, a(d),c,C));da[b]=C},getSliderOffset:function(g,e){var c=0,e="x"==e?4:5;z&&T?(c=a(g).css("-webkit-transform").split(","),c=parseInt(c[e],10)):c=parseInt(a(g).css("left"),10);return c},setSliderOffset:function(g,e){z&&T?a(g).css({webkitTransform:"matrix(1,0,0,1,"+e+",0)"}):a(g).css({left:e+"px"})},setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(T=!0,Y="-webkit-grab",ia="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(Y="move",ia="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")? W=!0:null!=navigator.userAgent.match("MSIE 8")?X=!0:navigator.userAgent.match("MSIE 9")},getSlideNumber:function(a,e,c){return(a-G[e]+c)%c},calcActiveOffset:function(a,e,c,C){for(var b=!1,a=[],q,f=0;f<c.length;f++)c[f]<=e&&c[f]>e-C&&(!b&&c[f]!=e&&(a[a.length]=c[f-1]),a[a.length]=c[f],b=!0);0==a.length&&(a[0]=c[c.length-1]);for(f=b=0;f<a.length;f++){var l=Math.abs(e-a[f]);l<C&&(b=a[f],C=l)}for(f=0;f<c.length;f++)b==c[f]&&(q=f);return q},changeSlide:function(g,d,c,f,b,q,l,s,u,t,z,w,r,p,h,A){e.autoSlidePause(r); for(var j=0;j<f.length;j++)clearTimeout(f[j]);var j=Math.ceil(A.autoSlideTransTimer/10)+1,m=e.getSliderOffset(d,"x"),y=w[g],y=y-m;if(A.infiniteSlider)for(var g=(g-G[r]+2*h)%h,y=w[g],y=y-m,n=[w[g]-a(d).width(),w[g]+a(d).width()],i=0;i<n.length;i++)Math.abs(n[i]-m)<Math.abs(y)&&(y=n[i]-m);var n=[],v;e.showScrollbar(A,b);for(i=0;i<=j;i++)v=i,v/=j,v--,v=m+y*(Math.pow(v,5)+1),n[n.length]=v;for(i=j=0;i<n.length;i++){if(0==i||1<Math.abs(n[i]-j)||i>=n.length-2)j=n[i],f[i]=e.slowScrollHorizontalIntervalTimer(10* (i+1),d,c,n[i],b,q,l,s,u,t,g,z,w,p,h,r,A);if(0==i&&""!=A.onSlideStart)A.onSlideStart(new e.args(A,d,a(d).children(":eq("+g+")"),g))}0!=y&&(f[f.length]=e.onSlideCompleteTimer(10*(i+1),A,d,a(d).children(":eq("+g+")"),g,r));$[r]=f;e.hideScrollbar(A,f,i,n,b,q,l,u,t,r);e.autoSlide(d,c,f,b,q,l,s,u,t,z,w,r,p,h,A)},autoSlide:function(a,d,c,f,b,q,l,z,u,t,E,w,r,p,h){if(!h.autoSlide)return!1;e.autoSlidePause(w);Z[w]=setTimeout(function(){!h.infiniteSlider&&s[w]>E.length-1&&(s[w]-=p);e.changeSlide((s[w]+G[w]+ p)%p+1,a,d,c,f,b,q,l,z,u,t,E,w,r,p,h);e.autoSlide(a,d,c,f,b,q,l,z,u,t,E,w,r,p,h)},h.autoSlideTimer+h.autoSlideTransTimer)},autoSlidePause:function(a){clearTimeout(Z[a])},isUnselectable:function(e,d){return""!=d.unselectableSelector&&1==a(e).closest(d.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(a,d,c,f,b,q,l,s,u,t,z,w,r,p,h,A,j){return setTimeout(function(){e.slowScrollHorizontalInterval(d,c,f,b,q,l,s,u,t,z,w,r,p,h,A,j)},a)},onSlideCompleteTimer:function(a,d,c,f, b,q){return setTimeout(function(){e.onSlideComplete(d,c,f,b,q)},a)},hideScrollbarIntervalTimer:function(a,d,c,f,b,q,l,s,u,t){return setTimeout(function(){e.hideScrollbarInterval(d,c,f,b,q,l,s,u,t)},a)},args:function(f,d,c,l){this.settings=f;this.data=a(d).parent().data("iosslider");this.sliderObject=d;this.sliderContainerObject=a(d).parent();this.currentSlideObject=c;this.currentSlideNumber=l;this.currentSliderOffset=-1*e.getSliderOffset(d,"x")},preventDrag:function(a){a.preventDefault()},preventClick:function(a){a.stopImmediatePropagation(); return!1},enableClick:function(){return!0}};e.setBrowserInfo();var M={init:function(g,d){var c=a.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,startAtSlide:1,scrollbar:!1,scrollbarDrag:!1,scrollbarHide:!0,scrollbarLocation:"top",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000", scrollbarElasticPullResistance:0.9,desktopClickDrag:!1,keyboardControls:!1,responsiveSlideContainer:!0,responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1,autoSlideTimer:5E3,autoSlideTransTimer:750,infiniteSlider:!1,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},g);void 0==d&&(d=this);return a(d).each(function(){function d(){e.autoSlidePause(b); a(j).css("width","");a(j).css("height","");a(x).css("width","");B=a(x).children().not("script");a(B).css("width","");l[b]=0;k=[];h=a(j).parent().width();m=a(j).outerWidth(!0);c.responsiveSlideContainer&&(m=a(j).outerWidth(!0)>h?h:a(j).outerWidth(!0));a(j).css({position:c.stageCSS.position,top:c.stageCSS.top,left:c.stageCSS.left,overflow:c.stageCSS.overflow,zIndex:c.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",width:m});a(c.unselectableSelector).css({cursor:"default"});c.responsiveSlides&& a(B).each(function(){var b=a(this).outerWidth(!0),b=b>m?m+-1*(a(this).outerWidth(!0)-a(this).width()):a(this).width();a(this).css({width:b})});a(B).each(function(c){a(this).css({position:"absolute",top:0});k[c]=-1*l[b];l[b]+=a(this).outerWidth(!0)});la[b]=2*l[b];a(B).each(function(c){e.setSliderOffset(a(this),-1*k[c]+l[b]);k[c]-=l[b]});if(!c.infiniteSlider){for(var N=0;N<k.length&&!(k[N]<=-1*(2*l[b]-m));N++)Z=N;k.splice(Z+1,k.length);k[k.length]=-1*(2*l[b]-m)}for(N=0;N<k.length;N++)F[N]=k[N];f[b]= l[b];a(x).css({position:"relative",cursor:Y,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",width:l[b]+"px"});l[b]=2*l[b]-m;A=a(j).parent().outerHeight(!0);y=a(j).height();c.responsiveSlideContainer&&(y=a(j).height()>A?A:a(j).height());a(j).css({height:y});if(c.infiniteSlider){e.getSliderOffset(a(x),"x");for(var N=a(x).width(),v=-1*((G[b]+D)%D);0>v;){var C=0,H=e.getSliderOffset(a(B[0]),"x");a(B).each(function(a){e.getSliderOffset(this,"x")<H&&(H=e.getSliderOffset(this,"x"),C=a)});var I=f[b]+ N;e.setSliderOffset(a(B)[C],I);f[b]=-1*k[1];l[b]=f[b]+N-m;k.splice(0,1);k.splice(k.length,0,-1*I);v++}}e.setSliderOffset(x,k[s[b]]);(P=0>=l[b]?!0:!1)&&a(x).css({cursor:"default"});!z&&!c.desktopClickDrag&&a(x).css({cursor:"default"});c.scrollbar&&!P&&(a("."+u).css({margin:c.scrollbarMargin,overflow:"hidden",display:"none"}),a("."+u+" ."+t).css({border:c.scrollbarBorder}),n=parseInt(a("."+u).css("marginLeft"))+parseInt(a("."+u).css("marginRight")),i=parseInt(a("."+u+" ."+t).css("borderLeftWidth"), 10)+parseInt(a("."+u+" ."+t).css("borderRightWidth"),10),r=""!=c.scrollbarContainer?a(c.scrollbarContainer).width():m,p=(r-n)/D,c.scrollbarHide||(M=c.scrollbarOpacity),a("."+u).css({position:"absolute",left:0,width:r-n+"px",margin:c.scrollbarMargin}),"top"==c.scrollbarLocation?a("."+u).css("top","0"):a("."+u).css("bottom","0"),a("."+u+" ."+t).css({borderRadius:c.scrollbarBorderRadius,background:c.scrollbarBackground,height:c.scrollbarHeight,width:p-i+"px",minWidth:c.scrollbarHeight,border:c.scrollbarBorder, webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:M,filter:"alpha(opacity:"+100*M+")",boxShadow:c.scrollbarShadow}),e.setSliderOffset(a("."+u+" ."+t),Math.floor((-1*k[s[b]]-f[b])/(l[b]-f[b])*(r-n-p))),a("."+u).css({display:"block"}),E=a("."+u+" ."+t),w=a("."+u));c.scrollbarDrag&&!P&&a("."+u+" ."+t).css({cursor:Y});c.infiniteSlider&&(J=(l[b]+m)/3);""!=c.navSlideSelector&&a(c.navSlideSelector).each(function(d){a(this).css({cursor:"pointer"});a(this).unbind("click.iosSliderEvent").bind("click.iosSliderEvent", function(){e.changeSlide(d,x,B,g,t,p,m,r,n,i,F,k,b,J,D,c)})});""!=c.navPrevSelector&&(a(c.navPrevSelector).css({cursor:"pointer"}),a(c.navPrevSelector).unbind("click.iosSliderEvent").bind("click.iosSliderEvent",function(){var a=(s[b]+G[b]+D)%D;(0<a||c.infiniteSlider)&&e.changeSlide(a-1,x,B,g,t,p,m,r,n,i,F,k,b,J,D,c)}));""!=c.navNextSelector&&(a(c.navNextSelector).css({cursor:"pointer"}),a(c.navNextSelector).unbind("click.iosSliderEvent").bind("click.iosSliderEvent",function(){var a=(s[b]+G[b]+D)% D;(a<k.length-1||c.infiniteSlider)&&e.changeSlide(a+1,x,B,g,t,p,m,r,n,i,F,k,b,J,D,c)}));c.autoSlide&&!P&&(""!=c.autoSlideToggleSelector&&(a(c.autoSlideToggleSelector).css({cursor:"pointer"}),a(c.autoSlideToggleSelector).unbind("click.iosSliderEvent").bind("click.iosSliderEvent",function(){V?(e.autoSlide(x,B,g,t,p,m,r,n,i,F,k,b,J,D,c),V=!1,a(c.autoSlideToggleSelector).removeClass("on")):(e.autoSlidePause(b),V=!0,a(c.autoSlideToggleSelector).addClass("on"))})),!V&&!P&&e.autoSlide(x,B,g,t,p,m,r,n,i, F,k,b,J,D,c),z?a(j).bind("touchend.iosSliderEvent",function(){!V&&!P&&e.autoSlide(x,B,g,t,p,m,r,n,i,F,k,b,J,D,c)}):(a(j).bind("mouseenter.iosSliderEvent",function(){e.autoSlidePause(b)}),a(j).bind("mouseleave.iosSliderEvent",function(){!V&&!P&&e.autoSlide(x,B,g,t,p,m,r,n,i,F,k,b,J,D,c)})));a(j).data("iosslider",{obj:pa,settings:c,scrollerNode:x,slideNodes:B,numberOfSlides:D,sliderNumber:b,originalOffsets:F,childrenOffsets:k,sliderMax:l[b],scrollbarClass:t,scrollbarWidth:p,scrollbarStageWidth:r,stageWidth:m, scrollMargin:n,scrollBorder:i,infiniteSliderOffset:G[b],infiniteSliderWidth:J});return!0}ca++;var b=ca,g=[];ja[b]=c;f[b]=0;l[b]=0;var L=[0,0],K=[0,0],u="scrollbarBlock"+ca,t="scrollbar"+ca,E,w,r,p,h,A,j=a(this),m,y,n,i,v;s[b]=c.startAtSlide-1;U[b]=s[b];var k,F=[],M=0,H=0,T=0,x=a(this).children(":first-child"),B,D=a(x).children().not("script").size(),Q=!1,Z=0,ma=!1,fa=void 0,J;G[b]=0;var P=!1;da[b]=-1;var V=!1;ka[b]=!1;var ga,ha=!1,aa=!1;ea[b]=!1;$[b]=[];c.scrollbarDrag&&(c.scrollbar=!0,c.scrollbarHide= !1);var pa=a(this);if(void 0!=pa.data("iosslider"))return!0;a(this).find("img").bind("dragstart.iosSliderEvent",function(a){a.preventDefault()});c.infiniteSlider&&(c.scrollbar=!1);c.scrollbar&&(""!=c.scrollbarContainer?a(c.scrollbarContainer).append("<div class = '"+u+"'><div class = '"+t+"'></div></div>"):a(x).parent().append("<div class = '"+u+"'><div class = '"+t+"'></div></div>"));if(!d())return!0;c.infiniteSlider&&e.setSliderOffset(x,k[s[b]]);a(this).find("a").bind("mousedown",e.preventDrag); a(this).find("[onclick]").bind("click",e.preventDrag).each(function(){a(this).data("onclick",this.onclick)});if(""!=c.onSliderLoaded)c.onSliderLoaded(new e.args(c,x,a(x).children(":eq("+s[b]+")"),s[b]));da[b]=s[b];if(ja[b].responsiveSlides||ja[b].responsiveSlideContainer){var R=qa?"orientationchange":"resize";a(window).bind(R+".iosSliderEvent",function(){if(!d())return!0})}c.keyboardControls&&!P&&a(document).bind("keydown.iosSliderEvent",function(a){!W&&!X&&(a=a.originalEvent);switch(a.keyCode){case 37:a= (s[b]+G[b]+D)%D;(0<a||c.infiniteSlider)&&e.changeSlide(a-1,x,B,g,t,p,m,r,n,i,F,k,b,J,D,c);break;case 39:a=(s[b]+G[b]+D)%D,(a<k.length-1||c.infiniteSlider)&&e.changeSlide(a+1,x,B,g,t,p,m,r,n,i,F,k,b,J,D,c)}});if(z||c.desktopClickDrag&&!P){var na=z?"touchstart.iosSliderEvent":"mousedown.iosSliderEvent",ba=a(x),R=a(x),oa=!1;c.scrollbarDrag&&(ba=ba.add(E),R=R.add(w));a(ba).bind(na,function(d){if(ea[b]||(oa=e.isUnselectable(d.target,c)))return!0;ga=a(this)[0]===a(E)[0]?E:x;!W&&!X&&(d=d.originalEvent); e.autoSlidePause(b);z?(eventX=d.touches[0].pageX,eventY=d.touches[0].pageY):(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty(),eventX=d.pageX,eventY=d.pageY,ma=!0,fa=x,a(this).css({cursor:ia}));L=[0,0];K=[0,0];O=0;Q=!1;for(d=0;d<g.length;d++)clearTimeout(g[d]);d=e.getSliderOffset(x,"x");d>-1*f[b]?(d=f[b],e.setSliderOffset(a("."+t),d),a("."+t).css({width:p- i+"px"})):d<-1*l[b]&&(d=-1*l[b],e.setSliderOffset(x,d),e.setSliderOffset(a("."+t),r-n-p),a("."+t).css({width:p-i+"px"}));d=a(this)[0]===a(E)[0]?f[b]:0;H=-1*(e.getSliderOffset(this,"x")-eventX-d);e.getSliderOffset(this,"y");L[1]=eventX;K[1]=eventY;aa=!1});na=z?"touchmove.iosSliderEvent":"mousemove.iosSliderEvent";a(R).bind(na,function(d){!W&&!X&&(d=d.originalEvent);if(oa)return!0;var g=0;z||(window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&& window.getSelection().removeAllRanges():document.selection&&document.selection.empty());if(z)eventX=d.touches[0].pageX,eventY=d.touches[0].pageY;else if(eventX=d.pageX,eventY=d.pageY,!ma)return!1;L[0]=L[1];L[1]=eventX;O=(L[1]-L[0])/2;K[0]=K[1];K[1]=eventY;S=(K[1]-K[0])/2;if(!Q&&""!=c.onSlideStart)c.onSlideStart(new e.args(c,x,a(x).children(":eq("+s[b]+")"),s[b]));if((3<S||-3>S)&&3>O&&-3<O&&z&&!Q)ha=!0;(5<O||-5>O)&&z?(d.preventDefault(),Q=!0):z||(Q=!0);if(Q&&!ha){var h=e.getSliderOffset(x,"x"),j=a(this)[0]=== a(w)[0]?f[b]:0,q=a(this)[0]===a(w)[0]?(f[b]-l[b])/(r-n-p):1,C=a(this)[0]===a(w)[0]?c.scrollbarElasticPullResistance:c.elasticPullResistance;z&&(T!=d.touches.length&&(H=-1*h+eventX),T=d.touches.length);if(c.infiniteSlider){if(h<=-1*l[b])if(C=a(x).width(),h<=-1*la[b]){var u=-1*F[0];a(B).each(function(b){e.setSliderOffset(a(B)[b],u);b<k.length&&(k[b]=-1*u);u+=a(this).width()});H-=-1*k[0];f[b]=-1*k[0];l[b]=f[b]+C-m;G[b]=0}else{var y=0,A=e.getSliderOffset(a(B[0]),"x");a(B).each(function(a){e.getSliderOffset(this, "x")<A&&(A=e.getSliderOffset(this,"x"),y=a)});var E=f[b]+C;e.setSliderOffset(a(B)[y],E);f[b]=-1*k[1];l[b]=f[b]+C-m;k.splice(0,1);k.splice(k.length,0,-1*E);G[b]++}if(h>=-1*f[b])if(C=a(x).width(),0<=h)u=-1*F[0],a(B).each(function(b){e.setSliderOffset(a(B)[b],u);b<k.length&&(k[b]=-1*u);u+=a(this).width()}),H+=-1*k[0],f[b]=-1*k[0],l[b]=f[b]+C-m,G[b]=D;else{var J=0,M=e.getSliderOffset(a(B[0]),"x");a(B).each(function(a){e.getSliderOffset(this,"x")>M&&(M=e.getSliderOffset(this,"x"),J=a)});E=f[b]-a(B[J]).width(); e.setSliderOffset(a(B)[J],E);k.splice(0,0,-1*E);k.splice(k.length-1,1);f[b]=-1*k[0];l[b]=f[b]+C-m;G[b]--}}else h>-1*f[b]&&(g=-1*(f[b]+-1*(H-j-eventX)*q-j)*C/q,console.log(g)),h<-1*l[b]&&(g=-1*(l[b]+-1*(H-j-eventX)*q-j)*C/q);e.setSliderOffset(x,-1*(H-j-eventX-g)*q-j);c.scrollbar&&(e.showScrollbar(c,t),I=Math.floor((H-eventX-g-f[b])/(l[b]-f[b])*(r-n-p)*q),j=p,h>=-1*f[b]?(j=p-i- -1*I,e.setSliderOffset(a("."+t),0),a("."+t).css({width:j+"px"})):h<=-1*l[b]+1?(j=r-n-i-I,e.setSliderOffset(a("."+t),I),a("."+ t).css({width:j+"px"})):e.setSliderOffset(a("."+t),I));z&&(v=d.touches[0].pageX);d=!1;g=e.calcActiveOffset(c,-1*(H-eventX-g),k,m,G[b],D,void 0,b);h=(g+G[b]+D)%D;c.infiniteSlider?h!=U[b]&&(d=!0):g!=s[b]&&(d=!0);if(d&&(s[b]=g,U[b]=h,aa=!0,""!=c.onSlideChange))c.onSlideChange(new e.args(c,x,a(x).children(":eq("+h+")"),h))}});a(ba).bind("touchend.iosSliderEvent",function(a){a=a.originalEvent;if(oa)return!0;if(0!=a.touches.length)for(var d=0;d<a.touches.length;d++)a.touches[d].pageX==v&&e.slowScrollHorizontal(x, B,g,t,O,S,p,m,r,n,i,F,k,b,J,D,ga,aa,c);else e.slowScrollHorizontal(x,B,g,t,O,S,p,m,r,n,i,F,k,b,J,D,ga,aa,c);ha=!1});if(!z){R=a(window);if(X||W)R=a(document);a(R).bind("mouseup.iosSliderEvent"+b,function(){Q?a(x).children(":eq("+s[b]+")").find("a").unbind("click.disableClick").bind("click.disableClick",e.preventClick):a(x).children(":eq("+s[b]+")").find("a").unbind("click.disableClick").bind("click.disableClick",e.enableClick);a(x).children(":eq("+s[b]+")").find("[onclick]").each(function(){this.onclick= function(b){if(Q)return!1;a(this).data("onclick").call(this,b||window.event)}});1.6<=parseFloat(a().jquery)&&a(x).children(":eq("+s[b]+")").find("*").each(function(){var b=a(this).data("events");if(void 0!=b&&void 0!=b.click&&"iosSliderEvent"!=b.click[0].namespace){if(!Q)return!1;a(this).one("click.disableClick",e.preventClick);var b=a(this).data("events").click,c=b.pop();b.splice(0,0,c)}});if(!ka[b]){a(ba).css({cursor:Y});ma=!1;if(void 0==fa)return!1;e.slowScrollHorizontal(fa,B,g,t,O,S,p,m,r,n,i, F,k,b,J,D,ga,aa,c);fa=void 0}ha=!1})}}})},destroy:function(g,d){void 0==d&&(d=this);return a(d).each(function(){var c=a(this),d=c.data("iosslider");if(void 0==d)return!1;void 0==g&&(g=!0);e.autoSlidePause(d.sliderNumber);ka[d.sliderNumber]=!0;a(window).unbind(".iosSliderEvent-"+d.sliderNumber);a(document).unbind(".iosSliderEvent-"+d.sliderNumber);a(this).unbind(".iosSliderEvent");a(this).children(":first-child").unbind(".iosSliderEvent");a(this).children(":first-child").children().unbind(".iosSliderEvent"); g&&(a(this).attr("style",""),a(this).children(":first-child").attr("style",""),a(this).children(":first-child").children().attr("style",""),a(d.settings.navSlideSelector).attr("style",""),a(d.settings.navPrevSelector).attr("style",""),a(d.settings.navNextSelector).attr("style",""),a(d.settings.autoSlideToggleSelector).attr("style",""),a(d.settings.unselectableSelector).attr("style",""));d.settings.scrollbar&&a(".scrollbarBlock"+d.sliderNumber).remove();for(var d=$[d.sliderNumber],b=0;b<d.length;b++)clearTimeout(d[b]); c.removeData("iosslider")})},update:function(g){void 0==g&&(g=this);return a(g).each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;M.destroy(!1,this);d.settings.startAtSlide=s[d.sliderNumber]+1;M.init(d.settings,this);if(""!=d.settings.onSliderUpdate)d.settings.onSliderUpdate(new e.args(d.settings,d.scrollerNode,a(d.scrollerNode).children(":eq("+s[d.sliderNumber]+")"),s[d.sliderNumber]%d.infiniteSliderOffset))})},addSlide:function(e,d){return this.each(function(){var c=a(this).data("iosslider"); if(void 0==c)return!1;d<=c.numberOfSlides?a(c.scrollerNode).children(":eq("+(d-1)+")").before(e):a(c.scrollerNode).children(":eq("+(d-2)+")").after(e);s[c.sliderNumber]>d-2&&s[c.sliderNumber]++;M.update(this)})},removeSlide:function(e){return this.each(function(){var d=a(this).data("iosslider");if(void 0==d)return!1;a(d.scrollerNode).children(":eq("+(e-1)+")").remove();s[d.sliderNumber]>e-1&&s[d.sliderNumber]--;M.update(this)})},goToSlide:function(g,d){void 0==d&&(d=this);return a(d).each(function(){var c= a(this).data("iosslider");if(void 0==c)return!1;g=(g-1+G[c.sliderNumber])%c.numberOfSlides;e.changeSlide(g,a(c.scrollerNode),a(c.slideNodes),$[c.sliderNumber],c.scrollbarClass,c.scrollbarWidth,c.stageWidth,c.scrollbarStageWidth,c.scrollMargin,c.scrollBorder,c.originalOffsets,c.childrenOffsets,c.sliderNumber,c.infiniteSliderWidth,c.numberOfSlides,c.settings);s[c.sliderNumber]=g})},lock:function(){return this.each(function(){var e=a(this).data("iosslider");if(void 0==e)return!1;ea[e.sliderNumber]=!0})}, unlock:function(){return this.each(function(){var e=a(this).data("iosslider");if(void 0==e)return!1;ea[e.sliderNumber]=!1})}};a.fn.iosSlider=function(e){if(M[e])return M[e].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof e||!e)return M.init.apply(this,arguments);a.error("invalid method call!")}})(jQuery);